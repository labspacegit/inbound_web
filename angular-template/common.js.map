{"version":3,"sources":["webpack:///./src/app/guards/complete-info.guard.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAA2C;AAGU;AAEC;AACc,CAAC,cAAc;AACR,CAAC,cAAc;AAC3B;AAO/D;IAEC,2BAAoB,YAAyB,EAAU,MAAa,EAAU,MAAgB;QAA1E,iBAAY,GAAZ,YAAY,CAAa;QAAU,WAAM,GAAN,MAAM,CAAO;QAAU,WAAM,GAAN,MAAM,CAAU;IAAG,CAAC;IAElG,uCAAW,GAAX,UACC,IAA4B,EAC5B,KAA0B;QAF3B,iBA+BC;QA3BA,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,SAAS,EAAE,CAAC,IAAI,CACxC,0DAAG,CAAC,cAAI;YACP,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACd,KAAK,SAAS;oBACb,MAAM,CAAC,IAAI,CAAC;gBACZ,QAAQ;gBAET,KAAK,OAAO;oBACX,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;oBACnB,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACxB,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,0BAA0B,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;oBACxD,MAAM,CAAC,KAAK,CAAC;gBACb,QAAQ;gBAEf;oBACC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;oBACnB,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACxB,KAAI,CAAC,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;oBACrB,MAAM,CAAC,KAAK,CAAC;YAErB,CAAC;QAGG,CAAC,CAAC,CACF,CAAC;IAGR,CAAC;IAGD,UAAU;IACP,sCAAU,GAAV,UAAW,IAAI;QACd,IAAM,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,0EAAc,EAAE;YACnD,KAAK,EAAE,OAAO;YACd,IAAI,EAAE,EAAE,SAAS,EAAE,IAAI,EAAC;SAC1B,CAAC,CAAC;IACD,CAAC;IA5CQ,iBAAiB;QAL7B,gEAAU,CAAC;YACX,UAAU,EAAE,MAAM;SAClB,CAAC;yCAKgC,gEAAY,EAAiB,sDAAM,EAAiB,2DAAS;OAFlF,iBAAiB,CA8C7B;IAAD,wBAAC;CAAA;AA9C6B","file":"common.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { TokenService } from '../auth/token.service';\nimport { Location } from '@angular/common'; //接收route para\nimport { catchError, map, tap } from 'rxjs/operators';\nimport {  Router, ActivatedRoute, ParamMap } from '@angular/router'; //接收route para\nimport {MatDialog, MatDialogRef, MAT_DIALOG_DATA} from '@angular/material'; //popup dialog\nimport { LoginComponent } from '../auth/login/login.component';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\n\n\nexport class CompleteInfoGuard implements CanActivate {\n\n\tconstructor(private tokenService:TokenService, private router:Router, private dialog:MatDialog) {}\n\n\tcanActivate(\n\t\tnext: ActivatedRouteSnapshot,\n\t\tstate: RouterStateSnapshot): Observable<boolean> | Promise<boolean> | boolean {\n\n\t\treturn this.tokenService.infoState().pipe(\n\t\t\tmap(code => {\n\t\t\t\tswitch (code) {\n\t\t\t\t\tcase \"SUCCESS\":\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t//break;\n\n\t\t\t\t\tcase \"BLOCK\":\n\t\t\t\t\t\tconsole.warn(state.url);\n\t\t      \t\t\tconsole.warn(next);\n\t\t\t\t\t\tthis.router.navigate(['/member/fillcompleteinfo', state.url]);\n\t\t        \t\treturn false;\n\t\t        \t\t//break;\n\t\t        \t\t\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.warn(state.url);\n\t\t      \t\t\tconsole.warn(next);\n\t\t\t\t\t\tthis.openDialog(state.url);\n\t\t        \t\treturn false;\n\t\t\t\t\t\t//break;\n\t\t\t\t}\n\n\t      \t\t\n      \t\t})\n      \t);\n\n\t\t\n\t}\n\n\n\t//開啟pop up\n    openDialog(data){\n    \tconst dialogRef = this.dialog.open(LoginComponent, {\n\t\t  \twidth: '500px',\n\t\t  \tdata: { returnUrl: data}\n\t\t});\n    }\n\n}\n"],"sourceRoot":""}